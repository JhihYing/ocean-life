{"version":3,"file":"js/435.dac0dc83.js","mappings":"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","sources":["webpack://ocean_life/./src/views/frontend/Login.vue","webpack://ocean_life/./src/views/frontend/Login.vue?e1a4"],"sourcesContent":["<script>\r\n// 套件(Axios)\r\nimport axios from \"axios\";\r\nimport { ref } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\nexport default {\r\n  setup() {\r\n    const userName = ref(\"\");\r\n    const password = ref(\"\");\r\n\r\n    const showEye = ref(false);\r\n\r\n    const router = useRouter();\r\n\r\n    // --------------------- cookie函式 ---------------------\r\n    // 設定 cookie\r\n    const setCookie = (cname, cvalue, exdays) => {\r\n      const d = new Date();\r\n      d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);\r\n      const expires = \"expires=\" + d.toUTCString();\r\n      document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n    };\r\n\r\n    // 取得 cookie 的值\r\n    const getCookie = (cname) => {\r\n      const name = cname + \"=\";\r\n      const ca = document.cookie.split(\";\");\r\n      for (let i = 0; i < ca.length; i++) {\r\n        let c = ca[i];\r\n        while (c.charAt(0) === \" \") {\r\n          c = c.substring(1);\r\n        }\r\n        if (c.indexOf(name) === 0) {\r\n          return c.substring(name.length, c.length);\r\n        }\r\n      }\r\n      return \"\";\r\n    };\r\n\r\n    // 檢查某 cookie 是否存在\r\n    const checkCookie = (cname) => {\r\n      const cookieValue = getCookie(cname);\r\n      if (cookieValue !== \"\") {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    };\r\n\r\n    const login = () => {\r\n      axios({\r\n        method: \"post\",\r\n        url: \"https://oceandemo.herokuapp.com/MySpringBoot/login\",\r\n\r\n        // API要求的資料\r\n        data: {\r\n          userAccount: userName.value,\r\n          userPass: password.value,\r\n        },\r\n      }).then(function (res) {\r\n        if (document.getElementById(\"keepLogin\").checked === false) {\r\n          // 使用Cookie\r\n          if (res.data.is_login === true) {\r\n            console.log(res.data);\r\n\r\n            if (res.data.userAccount) {\r\n              setCookie(\"token\", res.data.userToken);\r\n              setCookie(\"userCode\", res.data.userAccount);\r\n              setCookie(\"userId\", res.data.userId);\r\n            } else {\r\n              setCookie(\"mangerToken\", res.data.mangerToken);\r\n              setCookie(\"mangerCode\", res.data.mangerAccount);\r\n              setCookie(\"mangerId\", res.data.mangerId);\r\n            }\r\n\r\n            router.push({\r\n              path: \"/member/memberProfile\",\r\n            });\r\n            $(\"#keepLogin\").prop(\"checked\", false);\r\n          } else {\r\n            alert(res.data.is_login);\r\n            userName.value = \"\";\r\n            password.value = \"\";\r\n            $(\"#keepLogin\").prop(\"checked\", false);\r\n          }\r\n        } else {\r\n          // 使用localStorage\r\n          if (res.data.is_login === true) {\r\n            if (res.data.userAccount) {\r\n              localStorage.setItem(\"token\", res.data.userToken); // 保存token\r\n              localStorage.setItem(\"userCode\", res.data.userAccount);\r\n              localStorage.setItem(\"userId\", res.data.userId);\r\n            } else {\r\n              localStorage.setItem(\"mangerToken\", res.data.mangerToken);\r\n              localStorage.setItem(\"mangerCode\", res.data.mangerAccount);\r\n              localStorage.setItem(\"mangerId\", res.data.mangerId);\r\n            }\r\n\r\n            router.push({\r\n              path: \"/member/memberProfile\",\r\n            });\r\n\r\n            $(\"#keepLogin\").prop(\"checked\", false);\r\n          } else {\r\n            alert(res.data.is_login);\r\n            userName.value = \"\";\r\n            password.value = \"\";\r\n            $(\"#keepLogin\").prop(\"checked\", false);\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    const alertFn = () => {\r\n      alert(\"此功能維修中，若有不便，敬請見諒！\");\r\n    };\r\n\r\n    return {\r\n      login,\r\n      userName,\r\n      password,\r\n      setCookie,\r\n      getCookie,\r\n      checkCookie,\r\n      showEye,\r\n      alertFn,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <main class=\"login\">\r\n    <div class=\"containerMain\">\r\n      <form\r\n        class=\"loginForm\"\r\n        @submit.prevent=\"login\"\r\n        action=\"https://oceandemo.herokuapp.com/MySpringBoot/login\"\r\n        method=\"post\"\r\n        enctype=\"multipart/form-data\"\r\n      >\r\n        <h3>會員登入</h3>\r\n        <input\r\n          class=\"inputText\"\r\n          type=\"email\"\r\n          placeholder=\"電子郵件\"\r\n          v-model.trim=\"userName\"\r\n          name=\"userAccount\"\r\n          required\r\n        />\r\n        <br />\r\n        <div class=\"passwordBox\">\r\n          <input\r\n            class=\"inputText\"\r\n            :type=\"showEye ? 'text' : 'password'\"\r\n            placeholder=\"密碼\"\r\n            v-model.trim=\"password\"\r\n            name=\"userPass\"\r\n            required\r\n          />\r\n          <div class=\"eyeBtn\" @click=\"showEye = !showEye\">\r\n            <img\r\n              v-if=\"showEye\"\r\n              class=\"closeEyeImg\"\r\n              src=\"@/assets/images/closeEye.svg\"\r\n            />\r\n            <img v-else class=\"showEyeImg\" src=\"@/assets/images/openEye.svg\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"loginInfoBox\">\r\n          <div class=\"keepLogin\">\r\n            <input type=\"checkbox\" id=\"keepLogin\" />\r\n            <label for=\"keepLogin\">保持登入狀態</label>\r\n          </div>\r\n          <a @click=\"alertFn\">忘記密碼?</a>\r\n        </div>\r\n        <button class=\"loginBtn\" type=\"submit\">登入</button>\r\n        <p>快速登入</p>\r\n        <div class=\"communityIconBox\">\r\n          <div class=\"fb communityIcon\">\r\n            <img src=\"@/assets/images/fbIcon01.svg\" alt=\"\" />\r\n          </div>\r\n          <div class=\"google communityIcon\">\r\n            <img src=\"@/assets/images/googleIcon01.svg\" alt=\"\" />\r\n          </div>\r\n          <div class=\"line communityIcon\">\r\n            <img src=\"@/assets/images/lineIcon01.svg\" alt=\"\" />\r\n          </div>\r\n        </div>\r\n        <span\r\n          >不是會員?\r\n          <router-link to=\"/member/signup\">加入我們</router-link>\r\n        </span>\r\n      </form>\r\n    </div>\r\n  </main>\r\n</template>\r\n\r\n<style lang=\"scss\" src=\"@/assets/scss/layout/login/_login.scss\" scoped></style>\r\n","import { render } from \"./Login.vue?vue&type=template&id=61ed8c53&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"@/assets/scss/layout/login/_login.scss?vue&type=style&index=0&id=61ed8c53&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\芷盈\\\\Desktop\\\\作品集\\\\前端\\\\ocean_life\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-61ed8c53\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","src","_imports_0","_imports_1","type","id","for","_createElementBlock","onSubmit","$setup","action","method","enctype","_hoisted_3","placeholder","$event","name","required","_hoisted_4","onClick","_hoisted_10","_hoisted_11","_createVNode","_component_router_link","to","setup","userName","ref","password","showEye","router","useRouter","setCookie","cname","cvalue","exdays","d","Date","setTime","getTime","expires","toUTCString","document","cookie","getCookie","ca","split","i","length","c","charAt","substring","indexOf","checkCookie","cookieValue","login","axios","url","data","userAccount","value","userPass","then","res","getElementById","checked","is_login","console","log","userToken","userId","mangerToken","mangerAccount","mangerId","push","path","$","prop","alert","localStorage","setItem","alertFn","__exports__","render"],"sourceRoot":""}