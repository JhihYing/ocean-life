{"version":3,"file":"js/378.9a2be77d.js","mappings":"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","sources":["webpack://ocean_life/./src/views/backend/NewsBackendAdd.vue","webpack://ocean_life/./src/views/backend/NewsBackendAdd.vue?4bff"],"sourcesContent":["<script>\r\n// 套件(Axios)\r\nimport axios from \"axios\";\r\n\r\n// Vue 方法\r\nimport { ref, inject } from \"vue\";\r\n\r\nexport default {\r\n  setup() {\r\n    // --------------- 定義資料 ---------------\r\n    // reload (inject)\r\n    const reload = inject(\"reload\");\r\n\r\n    // 彈跳視窗 (是否顯示)\r\n    const popupBtn = ref(false);\r\n\r\n    // 預覽圖\r\n    const images = ref(\"\");\r\n\r\n    // 控制圖片顯示\r\n    const imageOpen = ref(false);\r\n\r\n    // 所上傳的圖片\r\n    // 在vue3中，如果DOM上使用了ref，必須在setup中先定義，否則打包會報錯。\r\n    const fileInput = ref(null); // 圖片\r\n    const titleInput = ref(null); // 標題\r\n    const contentInput = ref(null); // 內容\r\n    const remarkInput = ref(null); // 備註\r\n\r\n    const form = ref(null);\r\n\r\n    // -------------- 取得資料(axios) ---------------\r\n    // 所有消息\r\n    const submitFn = (e) => {\r\n      // 判斷是否有填寫必填的欄位\r\n      if (form.value.reportValidity()) {\r\n        // (1) 取得表單資料\r\n        const uploadfile = fileInput.value.files[0]; // 圖片\r\n        // console.dir(uploadfile);\r\n\r\n        const typeInfo = $(\"#value\").val(); // 類別\r\n        const titleInfo = $(\"#title\").val(); // 標題\r\n        const contentInfo = $(\"#content\").val(); // 內容\r\n        const remarkInfo = $(\"#remark\").val(); // 備註\r\n        const statusInfo = $(\"#status\").val(); // 狀態\r\n\r\n        // (2) 轉成 FormData 檔案格式\r\n        const formData = new FormData(); // 就能建立一個FormData格式的內容\r\n\r\n        // append 增加一個欄位到表單內，其中一個 file-to-upload\r\n        // file-to-upload 是 input標籤name 的名稱\r\n        formData.append(\"value\", typeInfo); // 文章類別\r\n        formData.append(\"file-to-upload\", uploadfile); // 文章圖片\r\n        formData.append(\"title\", titleInfo); // 文章標題\r\n        formData.append(\"content\", contentInfo); // 文章內容\r\n        formData.append(\"remark\", remarkInfo); // 文章內容-備註\r\n        formData.append(\"status\", statusInfo); // 文章狀態\r\n\r\n        // console.log(formData);\r\n\r\n        // (3) 將form表單的內容透過API的方式，發送到伺服器\r\n        // const fileName = fileInput.value.id;\r\n\r\n        const url = \"https://oceandemo.herokuapp.com/MySpringBoot/addArticle\";\r\n\r\n        axios.post(url, formData).then(function (res) {\r\n          // console.log(res.data);\r\n          // alert(\"新增成功\");\r\n\r\n          // 清空輸入的內容\r\n          titleInput.value = \"\";\r\n          contentInput.value = \"\";\r\n          remarkInput.value = \"\";\r\n\r\n          reload();\r\n          // }\r\n        });\r\n        // .catch(function (error) {\r\n        //   console.log(error);\r\n        // });\r\n      } else {\r\n        e.preventDefault();\r\n        // console.log(\"請完成必填欄位\");\r\n      }\r\n    };\r\n\r\n    // 預覽圖\r\n    const fileChange = (e) => {\r\n      // (1) 取得選取檔案的資料\r\n      const uploadfile = fileInput.value.files[0];\r\n      // console.log(\"open file\", uploadfile);\r\n\r\n      const input = e.target;\r\n\r\n      // 判斷是否有選擇圖檔\r\n      if (input.files.length === 0) {\r\n        // console.log(\"取消,沒有選擇圖片\");\r\n        imageOpen.value = false;\r\n      } else {\r\n        // (2) 建立URL網址:createObjectURL()\r\n        const urlInfo = window.URL.createObjectURL(uploadfile, {\r\n          type: \"image/jpeg\",\r\n        });\r\n        // console.log(\"_url\", urlInfo);\r\n\r\n        // (3) 將URL網址存入images裡\r\n        images.value = urlInfo;\r\n\r\n        imageOpen.value = true;\r\n      }\r\n    };\r\n\r\n    return {\r\n      form,\r\n      imageOpen,\r\n      popupBtn,\r\n      fileInput,\r\n      images,\r\n      submitFn,\r\n      titleInput,\r\n      contentInput,\r\n      remarkInput,\r\n      fileChange,\r\n      reload,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"titleBox\">\r\n    <h3>消息管理</h3>\r\n    <span>- 新增文章</span>\r\n  </div>\r\n\r\n  <!-- 表格資料 -->\r\n  <form\r\n    ref=\"form\"\r\n    action=\"https://oceandemo.herokuapp.com/MySpringBoot/addArticle\"\r\n    method=\"post\"\r\n    enctype=\"multipart/form-data\"\r\n  >\r\n    <div class=\"tableBox\">\r\n      <ul class=\"tableContent\">\r\n        <li>\r\n          <label for=\"\">文章編號</label>\r\n          <p>{{ $route.query.id }}</p>\r\n          <!-- <p>000001</p> -->\r\n        </li>\r\n        <li>\r\n          <label for=\"\">文章類別*</label>\r\n          <select name=\"value\" id=\"value\">\r\n            <option value=\"活動消息\">活動消息</option>\r\n            <option value=\"園區公告\">園區公告</option>\r\n            <option value=\"商城公告\">商城公告</option>\r\n          </select>\r\n        </li>\r\n        <li>\r\n          <label for=\"\">圖片*</label>\r\n          <div class=\"box\">\r\n            <input\r\n              required\r\n              id=\"customFile\"\r\n              class=\"imgInput\"\r\n              type=\"file\"\r\n              name=\"file-to-upload\"\r\n              ref=\"fileInput\"\r\n              @change=\"fileChange\"\r\n            />\r\n            <div class=\"imgBox\" v-if=\"imageOpen\">\r\n              <img :src=\"images\" />\r\n            </div>\r\n          </div>\r\n        </li>\r\n        <li>\r\n          <label for=\"\">標題*</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"title\"\r\n            id=\"title\"\r\n            ref=\"titleInput\"\r\n            required\r\n          />\r\n        </li>\r\n        <li class=\"positionTop\">\r\n          <label for=\"\">文章內容*</label>\r\n          <textarea\r\n            name=\"content\"\r\n            id=\"content\"\r\n            ref=\"contentInput\"\r\n            required\r\n          ></textarea>\r\n        </li>\r\n        <li class=\"positionTop\">\r\n          <label for=\"\">注意事項</label>\r\n          <textarea name=\"remark\" id=\"remark\" ref=\"remarkInput\"></textarea>\r\n        </li>\r\n        <li>\r\n          <label for=\"\">文章狀態*</label>\r\n          <select name=\"status\" id=\"status\">\r\n            <option value=\"上架\">上架</option>\r\n            <option value=\"下架\">下架</option>\r\n          </select>\r\n        </li>\r\n      </ul>\r\n      <div class=\"btnBox\">\r\n        <button\r\n          type=\"button\"\r\n          class=\"cancelBtn allBtn\"\r\n          @click=\"popupBtn = !popupBtn\"\r\n        >\r\n          取消\r\n        </button>\r\n\r\n        <router-link to=\"/backend/newsbackend/news\">\r\n          <button type=\"submit\" class=\"addBtn allBtn\" @click=\"submitFn\">\r\n            新增\r\n          </button>\r\n        </router-link>\r\n      </div>\r\n    </div>\r\n  </form>\r\n\r\n  <!-- 彈跳視窗 -->\r\n  <main class=\"ticket-popup\" v-show=\"popupBtn\">\r\n    <div class=\"containerMain\">\r\n      <div class=\"popupTop\">\r\n        <h3>關閉視窗</h3>\r\n      </div>\r\n\r\n      <div class=\"popupUnder\">\r\n        <p>尚未存檔，是否確認關閉？</p>\r\n        <div class=\"popupBtnBox\">\r\n          <button\r\n            class=\"popupCloseBtn\"\r\n            type=\"button\"\r\n            @click=\"popupBtn = !popupBtn\"\r\n          >\r\n            取消\r\n          </button>\r\n          <router-link to=\"/backend/newsbackend/news\">\r\n            <button class=\"popupOkBtn\" type=\"button\">確定</button>\r\n          </router-link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </main>\r\n</template>\r\n\r\n<style\r\n  lang=\"scss\"\r\n  src=\"@/assets/scss/layout/backend/_newsBackendAdd.scss\"\r\n  scoped\r\n></style>\r\n","import { render } from \"./NewsBackendAdd.vue?vue&type=template&id=6616cdb3&scoped=true\"\nimport script from \"./NewsBackendAdd.vue?vue&type=script&lang=js\"\nexport * from \"./NewsBackendAdd.vue?vue&type=script&lang=js\"\n\nimport \"@/assets/scss/layout/backend/_newsBackendAdd.scss?vue&type=style&index=0&id=6616cdb3&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\芷盈\\\\Desktop\\\\作品集\\\\前端\\\\ocean_life\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6616cdb3\"]])\n\nexport default __exports__"],"names":["_createElementVNode","class","ref","action","method","enctype","for","type","name","id","required","value","_hoisted_1","_hoisted_5","_toDisplayString","_ctx","query","_hoisted_6","_hoisted_7","onChange","$setup","_createElementBlock","src","_hoisted_10","_hoisted_11","_hoisted_14","_hoisted_17","_hoisted_19","onClick","_createVNode","_component_router_link","to","_hoisted_23","_hoisted_25","_hoisted_27","setup","reload","inject","popupBtn","images","imageOpen","fileInput","titleInput","contentInput","remarkInput","form","submitFn","e","reportValidity","uploadfile","files","typeInfo","$","val","titleInfo","contentInfo","remarkInfo","statusInfo","formData","FormData","append","url","axios","then","res","preventDefault","fileChange","input","target","length","urlInfo","window","URL","createObjectURL","__exports__","render"],"sourceRoot":""}