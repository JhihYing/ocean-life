"use strict";(self["webpackChunkocean_life"]=self["webpackChunkocean_life"]||[]).push([[453],{460:function(e,a,t){t.d(a,{Z:function(){return r}});var l=t(3396);const i={class:"sk-fading-circle"},n=(0,l.uE)('<div class="sk-circle1 sk-circle" data-v-044c9dad></div><div class="sk-circle2 sk-circle" data-v-044c9dad></div><div class="sk-circle3 sk-circle" data-v-044c9dad></div><div class="sk-circle4 sk-circle" data-v-044c9dad></div><div class="sk-circle5 sk-circle" data-v-044c9dad></div><div class="sk-circle6 sk-circle" data-v-044c9dad></div><div class="sk-circle7 sk-circle" data-v-044c9dad></div><div class="sk-circle8 sk-circle" data-v-044c9dad></div><div class="sk-circle9 sk-circle" data-v-044c9dad></div><div class="sk-circle10 sk-circle" data-v-044c9dad></div><div class="sk-circle11 sk-circle" data-v-044c9dad></div><div class="sk-circle12 sk-circle" data-v-044c9dad></div>',12),d=[n];function p(e,a,t,n,p,c){return(0,l.wg)(),(0,l.iD)("div",i,d)}var c={},s=t(89);const o=(0,s.Z)(c,[["render",p],["__scopeId","data-v-044c9dad"]]);var r=o},6453:function(e,a,t){t.r(a),t.d(a,{default:function(){return ve}});var l=t(3396),i=t(7139),n=t(9242);const d=e=>((0,l.dD)("data-v-a995c908"),e=e(),(0,l.Cn)(),e),p={key:0,class:"loading"},c={key:1},s=d((()=>(0,l._)("div",{class:"titleBox"},[(0,l._)("h3",null,"商品管理"),(0,l._)("span",null,"- 編輯商品")],-1))),o={ref:"form",action:"https://oceandemo.herokuapp.com/MySpringBoot/updateProduct",method:"post",enctype:"multipart/form-data"},r={class:"tableBox"},u={class:"tableContent"},m=d((()=>(0,l._)("label",{for:""},"商品編號",-1))),v=d((()=>(0,l._)("label",{for:""},"圖片*",-1))),_={class:"imageBox"},f=d((()=>(0,l._)("p",null,"※ 上傳數量以六張為限，第一張為首圖，請依序上傳",-1))),k={class:"showImgBox"},g=["src"],y=["src"],b=d((()=>(0,l._)("label",{for:""},"名稱*",-1))),I={class:"box priceBox"},w=d((()=>(0,l._)("label",{class:"price",for:""},"原價*",-1))),B={class:"box"},x=d((()=>(0,l._)("label",{for:""},"售價",-1))),h={class:"specLi"},H=d((()=>(0,l._)("label",{for:""},"規格/庫存*",-1))),q={class:"specNumSection"},D={class:"specBox"},S=["onUpdate:modelValue"],U=d((()=>(0,l._)("span",null,"規格",-1))),C={class:"numBox"},V=["onUpdate:modelValue"],z=d((()=>(0,l._)("span",null,"庫存",-1))),M=["onClick"],P=d((()=>(0,l._)("h3",{class:"productInfo"},"商品詳情",-1))),L={class:"tableBox"},j={class:"tableContent"},F={class:"positionTop"},Z=d((()=>(0,l._)("label",{for:""},"說明*",-1))),A=d((()=>(0,l._)("label",{for:""},"材質*",-1))),N={class:"box priceBox"},O=d((()=>(0,l._)("label",{for:""},"尺寸*",-1))),T={class:"box"},R=d((()=>(0,l._)("label",{for:""},"產地*",-1))),W={class:"positionTop"},K=d((()=>(0,l._)("label",{for:""},"注意事項",-1))),Y=d((()=>(0,l._)("label",{for:""},"商品狀態*",-1))),E=d((()=>(0,l._)("option",{value:"上架"},"上架",-1))),G=d((()=>(0,l._)("option",{value:"下架"},"下架",-1))),J=[E,G],Q={class:"btnBox"},X={class:"ticket-popup"},ee={class:"containerMain"},ae=d((()=>(0,l._)("div",{class:"popupTop"},[(0,l._)("h3",null,"關閉視窗")],-1))),te={class:"popupUnder"},le=d((()=>(0,l._)("p",null,"尚未存檔，是否確認關閉？",-1))),ie={class:"popupBtnBox"},ne=d((()=>(0,l._)("button",{class:"popupOkBtn",type:"button"},"確定",-1)));function de(e,a,t,d,$,E){const G=(0,l.up)("Loading"),de=(0,l.up)("router-link");return d.loading?((0,l.wg)(),(0,l.iD)("section",p,[(0,l.Wm)(G)])):((0,l.wg)(),(0,l.iD)("section",c,[s,(0,l._)("form",o,[(0,l._)("div",r,[(0,l._)("ul",u,[(0,l._)("li",null,[m,(0,l._)("p",null,(0,i.zw)(e.$route.query.index),1)]),(0,l._)("li",null,[v,(0,l._)("div",_,[(0,l._)("input",{type:"file",class:"imgInput",id:"imgInput",name:"file-to-upload",ref:"fileInput",multiple:"",onChange:a[0]||(a[0]=(...e)=>d.previewMultiImage&&d.previewMultiImage(...e))},null,544),f,(0,l._)("div",k,[d.previewList.data.length?((0,l.wg)(!0),(0,l.iD)(l.HY,{key:0},(0,l.Ko)(d.previewList.data,((e,a)=>((0,l.wg)(),(0,l.iD)("div",{class:"imgBox",key:a},[d.imageOpen?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("img",{key:0,class:"showImg",src:e},null,8,g)),d.imageOpen?((0,l.wg)(),(0,l.iD)("img",{key:1,src:"data:image/png;base64,"+e},null,8,y)):(0,l.kq)("",!0)])))),128)):(0,l.kq)("",!0)])])]),(0,l._)("li",null,[b,(0,l.wy)((0,l._)("input",{required:"",type:"text",name:"name",id:"title",ref:"titleInput","onUpdate:modelValue":a[1]||(a[1]=e=>d.title=e)},null,512),[[n.nr,d.title,void 0,{trim:!0}]])]),(0,l._)("li",null,[(0,l._)("div",I,[w,(0,l.wy)((0,l._)("input",{required:"",type:"text",name:"price",id:"price",ref:"priceInput","onUpdate:modelValue":a[2]||(a[2]=e=>d.price=e)},null,512),[[n.nr,d.price,void 0,{trim:!0}]])]),(0,l._)("div",B,[x,(0,l.wy)((0,l._)("input",{type:"text",name:"priceSale",id:"salePrice",ref:"salePriceInput","onUpdate:modelValue":a[3]||(a[3]=e=>d.priceSale=e)},null,512),[[n.nr,d.priceSale,void 0,{trim:!0}]])])]),(0,l._)("li",h,[H,(0,l._)("div",q,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.specItems.data,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"specNumBox",key:t},[(0,l._)("div",D,[(0,l.wy)((0,l._)("input",{class:"spec",type:"text",name:"type",id:"type",ref_for:!0,ref:"typeInput","onUpdate:modelValue":e=>d.specItems.data[t]=e,onInput:a[4]||(a[4]=(...e)=>d.inp&&d.inp(...e)),required:""},null,40,S),[[n.nr,d.specItems.data[t],void 0,{trim:!0}]]),U]),(0,l._)("div",C,[(0,l.wy)((0,l._)("input",{required:"",type:"text",name:"num",id:"num",ref_for:!0,ref:"numInput","onUpdate:modelValue":e=>d.numItems.data[t]=e},null,8,V),[[n.nr,d.numItems.data[t],void 0,{trim:!0}]]),z]),(0,l._)("span",null,(0,i.zw)(t+1)+"/5",1),(0,l._)("button",{type:"button",class:"minusBtn",onClick:e=>d.onMinus(t)}," - ",8,M)])))),128)),(0,l._)("button",{type:"button",class:"addBtn",onClick:a[5]||(a[5]=(...e)=>d.onAdd&&d.onAdd(...e))},"+")])])])]),P,(0,l._)("div",L,[(0,l._)("ul",j,[(0,l._)("li",F,[Z,(0,l.wy)((0,l._)("textarea",{required:"",name:"content",id:"content",ref:"contentInput","onUpdate:modelValue":a[6]||(a[6]=e=>d.content=e)},null,512),[[n.nr,d.content,void 0,{trim:!0}]])]),(0,l._)("li",null,[A,(0,l.wy)((0,l._)("input",{required:"",type:"text",name:"meterial",id:"material",ref:"materialInput","onUpdate:modelValue":a[7]||(a[7]=e=>d.material=e)},null,512),[[n.nr,d.material,void 0,{trim:!0}]])]),(0,l._)("li",null,[(0,l._)("div",N,[O,(0,l.wy)((0,l._)("input",{required:"",type:"text",name:"size",id:"size",ref:"sizeInput","onUpdate:modelValue":a[8]||(a[8]=e=>d.size=e)},null,512),[[n.nr,d.size,void 0,{trim:!0}]])]),(0,l._)("div",T,[R,(0,l.wy)((0,l._)("input",{required:"",type:"text",name:"mf",id:"made",ref:"madeInput","onUpdate:modelValue":a[9]||(a[9]=e=>d.mf=e)},null,512),[[n.nr,d.mf,void 0,{trim:!0}]])])]),(0,l._)("li",W,[K,(0,l.wy)((0,l._)("textarea",{name:"remark",id:"remark",ref:"remarkInput","onUpdate:modelValue":a[10]||(a[10]=e=>d.remark=e)},null,512),[[n.nr,d.remark,void 0,{trim:!0}]])]),(0,l._)("li",null,[Y,(0,l.wy)((0,l._)("select",{name:"status",id:"status","onUpdate:modelValue":a[11]||(a[11]=e=>d.status=e)},J,512),[[n.bM,d.status]])])]),(0,l._)("div",Q,[(0,l._)("button",{type:"button",class:"cancelBtn allBtn",onClick:a[12]||(a[12]=e=>d.popupBtn=!d.popupBtn)}," 取消 "),(0,l.Wm)(de,{to:"/backend/onlineBackend/online/productd"},{default:(0,l.w5)((()=>[(0,l._)("button",{type:"submit",class:"addBtn allBtn",onClick:a[13]||(a[13]=(...e)=>d.submitFn&&d.submitFn(...e))}," 更新 ")])),_:1})])])],512),(0,l.wy)((0,l._)("main",X,[(0,l._)("div",ee,[ae,(0,l._)("div",te,[le,(0,l._)("div",ie,[(0,l._)("button",{class:"popupCloseBtn",type:"button",onClick:a[14]||(a[14]=e=>d.popupBtn=!d.popupBtn)}," 取消 "),(0,l.Wm)(de,{to:"/backend/onlineBackend/online/product"},{default:(0,l.w5)((()=>[ne])),_:1})])])])],512),[[n.F8,d.popupBtn]])]))}t(7658);var pe=t(4311),ce=t(2483),se=t(4870),oe=t(460),re={components:{Loading:oe.Z},setup(){const e=(0,se.iH)(!0),a=(0,ce.yj)(),t=(0,se.qj)({data:[]}),i=(0,se.iH)(!0),n=(0,se.qj)({data:[""]}),d=(0,se.qj)({data:[""]}),p=(0,se.qj)({data:[]}),c=(0,se.qj)({data:[]}),s=(0,l.f3)("reload"),o=(0,se.iH)(!1),r=(0,se.iH)(""),u=(0,se.iH)(null),m=(0,se.iH)(null),v=(0,se.iH)(null),_=(0,se.iH)(null),f=(0,se.iH)(null),k=(0,se.iH)(null),g=(0,se.iH)(null),y=(0,se.iH)(null),b=(0,se.iH)(null),I=(0,se.iH)(null),w=(0,se.iH)(null),B=(0,se.iH)(null),x=(0,se.iH)(""),h=(0,se.iH)(""),H=(0,se.iH)(""),q=(0,se.iH)(""),D=(0,se.iH)(""),S=(0,se.iH)(""),U=(0,se.iH)(""),C=(0,se.iH)(""),V=(0,se.iH)(""),z=(0,se.qj)({data:[]});(0,l.bv)((()=>{pe.Z.post("https://oceandemo.herokuapp.com/MySpringBoot/findByProductID",{productId:M()}).then((a=>{t.data=a.data,x.value=a.data.productName,h.value=a.data.productContent.replace(/<br>/g,"\n"),H.value=a.data.productRemark.replace(/<br>/g,"\n"),q.value=a.data.productStatus,D.value=a.data.productPrice,S.value=a.data.productPriceSale,U.value=a.data.productSpenSize,C.value=a.data.productSpenMF,V.value=a.data.productSpenMaterial,z.data=a.data.productType.split(","),d.data=a.data.productNum.split(","),n.data=a.data.productImg,p.data=a.data.productImg,e.value=!1}))}));const M=()=>a.query.id,P=e=>{if(B.value.reportValidity()){const e=$("#title").val(),a=$("#price").val(),t=$("#salePrice").val(),l=$("#content").val(),i=$("#material").val(),n=$("#size").val(),p=$("#made").val(),o=$("#remark").val(),r=$("#status").val(),u=new FormData;u.append("productId",M());for(let d=0;d<c.data.length;d++)u.append("file-to-upload",c.data[d]);u.append("name",e),u.append("price",a),u.append("priceSale",t),u.append("type",z.data),u.append("num",d.data),u.append("content",l),u.append("meterial",i),u.append("size",n),u.append("mf",p),u.append("remark",o),u.append("status",r);const m="https://oceandemo.herokuapp.com/MySpringBoot/updateProduct";pe.Z.post(m,u).then((function(e){s()})).catch((function(e){console.log(e)}))}else e.preventDefault()},L=()=>{p.data=[]},j=(0,se.iH)(!1),F=e=>{j.value||(j.value=!0,L());const a=e.target;let t=a.files.length,l=0;if(a.files)while(t--){const e=new FileReader;e.onload=e=>{p.data.length<6&&p.data.push(e.target.result)},c.data.push(a.files[l]),e.readAsDataURL(a.files[l]),l++,i.value=!1}},Z=()=>{z.data.length<5?z.data.push(""):alert("以達到上限")},A=e=>{z.data.splice(e,1),d.data.splice(e,1)},N=()=>{};return{invoked:j,init:L,typeInput:f,inp:N,onAdd:Z,fileInput:u,priceInput:v,salePriceInput:_,numInput:k,contentInput:g,materialInput:y,sizeInput:b,madeInput:I,remarkInput:w,previewMultiImage:F,previewList:p,imageList:c,popupBtn:o,form:B,images:r,submitFn:P,reload:s,numItems:d,productDatas:t,imagesAxios:n,imageOpen:i,price:D,priceSale:S,size:U,mf:C,material:V,title:x,content:h,remark:H,status:q,specItems:z,titleInput:m,onMinus:A,loading:e}}},ue=t(89);const me=(0,ue.Z)(re,[["render",de],["__scopeId","data-v-a995c908"]]);var ve=me}}]);
//# sourceMappingURL=453.08aa9911.js.map